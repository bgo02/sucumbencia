<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Cálculo de Sucumbência</title>
<style>
    body {
        font-family: Arial, sans-serif;
        max-width: 900px;
        margin: auto;
        padding: 20px;
        line-height: 1.5;
        color: #222;
        background: #fafafa;
    }
    h1 { text-align: center; }
    .box {
        background: white;
        padding: 15px;
        border-radius: 8px;
        box-shadow: 0 1px 4px rgba(0,0,0,0.15);
        margin-bottom: 20px;
    }
    textarea, input, select {
        width: 100%;
        box-sizing: border-box;
        margin-top: 6px;
        margin-bottom: 12px;
        padding: 10px;
        border-radius: 6px;
        border: 1px solid #bbb;
    }
    button {
        padding: 10px 20px;
        border: none;
        background: #2a66f7;
        color: white;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
    }
    button:hover { opacity: 0.85; }
    #resultado { white-space: pre-wrap; }
</style>
</head>
<body>

<h1>Calculadora de Sucumbência</h1>

<div class="box">
    <label><b>Valor total da causa (R$):</b></label>
    <input id="valorCausa" type="number" placeholder="Ex.: 50000">

    <label><b>Valor atribuído aos danos morais (R$):</b></label>
    <input id="valorMorais" type="number" placeholder="Ex.: 10000">

    <label><b>Valor econômico dos pedidos (períodos etc.) (R$):</b></label>
    <input id="valorPeriodos" type="number" placeholder="Ex.: 40000">

    <label><b>Percentual obtido pela parte autora (% dos pedidos):</b></label>
    <input id="percentualAutora" type="number" placeholder="Ex.: 62">

    <label><b>A parte autora possui AJG?</b></label>
    <select id="ajg">
        <option value="nao">Não</option>
        <option value="sim">Sim</option>
    </select>

    <button onclick="calcular()">Calcular sucumbência</button>
</div>

<div class="box">
    <h2>Resultado</h2>
    <div id="resultado"></div>
</div>

<script>
// -------------------------------
// CÁLCULO
// -------------------------------

function calcular() {
    const valorCausa = Number(document.getElementById("valorCausa").value);
    const valorMorais = Number(document.getElementById("valorMorais").value);
    const valorPeriodos = Number(document.getElementById("valorPeriodos").value);
    const pAutora = Number(document.getElementById("percentualAutora").value);
    const ajg = document.getElementById("ajg").value;

    if (!valorCausa || !valorMorais || !valorPeriodos || !pAutora) {
        document.getElementById("resultado").innerText =
            "Preencha todos os campos com valores numéricos válidos.";
        return;
    }

    // proporção dos danos morais no valor total
    const propMorais = valorMorais / valorCausa;
    const propPeriodos = valorPeriodos / valorCausa;

    // sucumbências brutas
    const sucAutora = 100 - pAutora;
    const sucINSS = pAutora;

    // regra da sucumbência mínima (<10%)
    let texto = "";
    let autoraPaga = 0;
    let inssPaga = 0;

    if (sucAutora < 10 && sucINSS >= 10) {
        // Autora perde menos de 10%
        inssPaga = 100;
        autoraPaga = 0;
        texto += "Reconhece-se sucumbência mínima da parte autora, pois sua perda corresponde a menos de 10% do total. Assim, compete exclusivamente ao INSS suportar os ônus sucumbenciais.\n\n";
    } else if (sucINSS < 10 && sucAutora >= 10) {
        // INSS perde menos de 10%
        autoraPaga = 100;
        inssPaga = 0;
        texto += "Reconhece-se sucumbência mínima do INSS, pois sua perda corresponde a menos de 10% do total. Assim, compete exclusivamente à parte autora suportar os ônus sucumbenciais.\n\n";
    } else {
        // divisão proporcional normal
        autoraPaga = sucAutora;
        inssPaga = sucINSS;
        texto += "A sucumbência é distribuída proporcionalmente ao êxito de cada parte, considerando a composição da causa (danos morais e demais pedidos).\n\n";
    }

    // ajuste dos percentuais dentro do texto (sem “0%” absurdos)
    function pct(x) {
        return x.toFixed(2).replace(".00", "");
    }

    // textos específicos conforme AJG
    let textoAutora = "";
    if (ajg === "sim") {
        textoAutora =
            "A parte autora, embora beneficiária da assistência judiciária gratuita, é condenada ao pagamento da sua parcela de honorários advocatícios, sem suspensão da exigibilidade. O INSS é condenado ao ressarcimento da parte correspondente das custas adiantadas.";
    } else {
        textoAutora =
            "A parte autora é condenada ao pagamento da sua parcela dos honorários advocatícios, nos termos proporcionais definidos.";
    }

    const textoINSS =
        "O INSS é condenado ao pagamento da sua parcela dos honorários advocatícios, calculada de forma proporcional ao grau de sucumbência.";

    // montagem final do texto
    texto +=
        "Distribuição final dos honorários:\n\n" +
        (autoraPaga > 0
            ? `• Parte autora: ${pct(autoraPaga)}% dos honorários.\n`
            : "• Parte autora: não arca com honorários, diante da sucumbência mínima da parte ré.\n") +
        (inssPaga > 0
            ? `• INSS: ${pct(inssPaga)}% dos honorários.\n\n`
            : "• INSS: não arca com honorários, diante da sucumbência mínima da parte autora.\n\n");

    texto += "Justificativa da composição econômica:\n" +
        `• Danos morais representam ${pct(propMorais * 100)}% do valor total da causa.\n` +
        `• Os demais pedidos representam ${pct(propPeriodos * 100)}%.\n\n`;

    if (autoraPaga > 0) texto += textoAutora + "\n\n";
    if (inssPaga > 0) texto += textoINSS + "\n";

    document.getElementById("resultado").innerText = texto;
}
</script>

</body>
</html>
